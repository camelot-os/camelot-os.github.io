<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>How to Create a Camelot-OS Project - Camelot Operating System</title><meta name="description" content="A practical step-by-step guide for embedded developers Camelot-OS provides a secure, microkernel-based operating system foundation for embedded devices. To build your own project with Camelot-OS, the recommended starting point is the sample-project template, which illustrates how to define and assemble a complete build including the&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="stylesheet" href="https://camelot-os.h2lab.org/media/plugins/syntaxHighlighter/prism-beige.css"><link rel="stylesheet" href="https://camelot-os.h2lab.org/media/plugins/syntaxHighlighter/prism-inline-color.css"><link rel="canonical" href="https://camelot-os.h2lab.org/how-to-create-a-camelot-os-project/"><link rel="alternate" type="application/atom+xml" href="https://camelot-os.h2lab.org/feed.xml" title="Camelot Operating System - RSS"><link rel="alternate" type="application/json" href="https://camelot-os.h2lab.org/feed.json" title="Camelot Operating System - JSON"><meta property="og:title" content="How to Create a Camelot-OS Project"><meta property="og:image" content="https://camelot-os.h2lab.org/media/website/camelot-OS.png"><meta property="og:image:width" content="323"><meta property="og:image:height" content="342"><meta property="og:site_name" content="Camelot Operating System"><meta property="og:description" content="A practical step-by-step guide for embedded developers Camelot-OS provides a secure, microkernel-based operating system foundation for embedded devices. To build your own project with Camelot-OS, the recommended starting point is the sample-project template, which illustrates how to define and assemble a complete build including the&hellip;"><meta property="og:url" content="https://camelot-os.h2lab.org/how-to-create-a-camelot-os-project/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://camelot-os.h2lab.org/media/website/h2lab.png" type="image/png"><link rel="stylesheet" href="https://camelot-os.h2lab.org/assets/css/style.css?v=1d12dfc293a797122c81fcead8a9b6ac"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://camelot-os.h2lab.org/how-to-create-a-camelot-os-project/"},"headline":"How to Create a Camelot-OS Project","datePublished":"2026-01-19T11:08+01:00","dateModified":"2026-01-19T11:35+01:00","image":{"@type":"ImageObject","url":"https://camelot-os.h2lab.org/media/website/camelot-OS.png","height":342,"width":323},"description":"A practical step-by-step guide for embedded developers Camelot-OS provides a secure, microkernel-based operating system foundation for embedded devices. To build your own project with Camelot-OS, the recommended starting point is the sample-project template, which illustrates how to define and assemble a complete build including the&hellip;","author":{"@type":"Person","name":"H2Lab Development Team","url":"https://camelot-os.h2lab.org/authors/h2lab-development-team/"},"publisher":{"@type":"Organization","name":"H2Lab Development Team","logo":{"@type":"ImageObject","url":"https://camelot-os.h2lab.org/media/website/camelot-OS.png","height":342,"width":323}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><style>.ti{fill:none;stroke-linecap:round;stroke-linejoin:round;vertical-align:middle}</style><style>:root {--toc-max-height: auto;}html {scroll-padding-top: 2rem;}.post__toc h2{align-items: center;border: none;cursor: pointer;display: inline-flex;gap: .5em;margin: 0;padding: 0;user-select: none;}.post__toc > ol {margin-left: 0;max-height: 0;overflow: auto;opacity: 0;transition: opacity 0.3s ease-out, max-height 0.5s ease-out;}.post__toc > ol[aria-hidden="false"] {max-height: var(--toc-max-height);opacity: 1;transition: opacity 0.3s ease-in, max-height 0.5s ease-in;}.post__toc ol {counter-reset: item;list-style: none;}.post__toc li {padding-left: 0;padding-bottom: 0;}.post__toc ol ol {margin-left: 1.5rem;margin-top: 0;}.post__toc ol ol li::before {margin-left: 0;}.post__toc a {align-items: stretch;color: var(--toc-link-color, var(--link-color));display: inline-flex;flex-wrap: nowrap;}.post__toc a:hover, .post__toc a:active, .post__toc a:focus {color: var(--toc-link-color-hover, var(--link-color-hover));}.post__toc a::before {content: counters(item, ".", none) ". ";counter-increment: item;color: var(--toc-number-color, var(--text-color));display: inline-block;flex-grow: 0;flex-shrink: 0;margin-right: 0.2em;}.post__toc-toggle {background: none;border: none;border-radius: 0;box-shadow: none;color: var(--toc-toggle-link-color, var(--color));cursor: pointer;display: inline;font-weight: normal;overflow: visible;padding: 0;text-align: left;text-decoration: none;text-transform: none;vertical-align: baseline;will-change: unset;}.post__toc-toggle:hover, .post__toc-toggle:active, .post__toc-toggle:focus {background: inherit;border: inherit;box-shadow: inherit;color: var(--toc-toggle-link-color-hover, var(--color, inherit));text-decoration: none;transform: inherit;}.post__toc-toggle::before{content: "[";color: var(--toc-toggle-color, var(--text-color));}.post__toc-toggle::after {content: "]";color: var(--toc-toggle-color, var(--text-color));}</style><noscript><style>.post__toc > ol {max-height: var(--toc-max-height);opacity: 1;transition: none;}.post__toc h2{cursor: default;}</style></noscript></head><body class="page-template"><header class="top js-header"><a class="logo" href="https://camelot-os.h2lab.org/"><img src="https://camelot-os.h2lab.org/media/website/camelot-OS.png" alt="Camelot Operating System" width="323" height="342"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Pages</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://camelot-os.h2lab.org/camelot-os-because-secure-systems-deserve-a-secure-foundation/" target="_self">Introduction</a></li><li><a href="https://camelot-os.h2lab.org/sentry-micro-kernel/" target="_self">Sentry micro-kernel</a></li><li><a href="https://camelot-os.h2lab.org/camelot-os-sdk/" target="_self">Camelot SDK</a></li></ul></li><li><a href="https://camelot-os.h2lab.org/" target="_self">Blog Posts</a></li><li class="active-parent has-submenu"><span class="is-separator" aria-haspopup="true">Documentation</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://sentry-kernel.readthedocs.io/en/latest/" target="_blank">Sentry kernel</a></li><li class="active-parent has-submenu"><span class="is-separator" aria-haspopup="true">Howtos</span><ul class="navbar__submenu level-3" aria-hidden="true"><li><a href="https://camelot-os.h2lab.org/runing-kernel-autotests/" target="_self">Autotesting Sentry kernel</a></li><li class="active"><a href="https://camelot-os.h2lab.org/how-to-create-a-camelot-os-project/" target="_self">Run a Camelot-OS project</a></li><li><a href="https://camelot-os.h2lab.org/bootstrap-a-rust-application/" target="_self">Bootsrap your Rust application</a></li></ul></li></ul></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Repositories</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://github.com/camelot-os/sentry-kernel" target="_blank">Sentry Kernel</a></li><li><a href="https://github.com/camelot-os/shield" target="_self">Shield runtime</a></li><li><a href="https://github.com/camelot-os/shield" target="_self">Barbican project manager</a></li></ul></li></ul></nav><div class="search"><div class="search__overlay js-search-overlay"><div class="wrapper search__overlay-inner"></div></div><button class="search__btn btn--icon js-search-btn" aria-label="Search"><svg height="18" width="18" role="presentation" focusable="false"><use xlink:href="https://camelot-os.h2lab.org/assets/svg/svg-map.svg#search"/></svg></button></div></header><main class="page"><article class="content"><div class="hero hero--noimage"><header class="hero__content"><div class="wrapper"><h1>How to Create a Camelot-OS Project</h1></div></header></div><div class="entry-wrapper content__entry"><nav class="post__toc"><h2><span>Table of Contents</span><button class="post__toc-toggle">show</button></h2><ol><li><a href="#mcetoc_1jfaqq5bm1vt">Install the Project Tools</a></li><li><a href="#mcetoc_1jfaqq5bm1vu">Clone the Camelot-OS sample Project</a></li><li><a href="#mcetoc_1jfaqq5bm1vv">About project.toml</a></li><li><a href="#mcetoc_1jfaqq5bm200">Download Sources</a></li><li><a href="#mcetoc_1jfaqq5bm201">Setup the Build</a></li><li><a href="#mcetoc_1jfaqq5bm202">Compile the Project</a></li><li><a href="#mcetoc_1jfaqq5bm203">Run your firmware</a></li></ol></nav><p data-start="674" data-end="730"><em data-start="674" data-end="730">A practical step-by-step guide for embedded developers</em></p><p data-start="732" data-end="1050">Camelot-OS provides a secure, microkernel-based operating system foundation for embedded devices. To build your own project with Camelot-OS, the recommended starting point is the <strong data-start="911" data-end="938"><a href="https://github.com/camelot-os/sample-project/tree/main">sample-project template</a></strong>, which illustrates how to define and assemble a complete build including the kernel, runtime, and applications.</p><p data-start="1052" data-end="1205">This guide shows you how to bootstrap a new Camelot-OS project, configure it, download dependencies, build your firmware, and customize your application.</p><h2 id="mcetoc_1jfaqq5bm1vt" data-start="1212" data-end="1252">Install the Project Tools</h2><p data-start="1254" data-end="1372">Camelot-OS project workflows are driven by the <strong data-start="1301" data-end="1323">Barbican meta-tool</strong>, a Python-based build orchestrator that handles:</p><ul data-start="1374" data-end="1521"><li data-start="1374" data-end="1399"><p data-start="1376" data-end="1399">downloading source code</p></li><li data-start="1400" data-end="1451"><p data-start="1402" data-end="1451">configuring the kernel, runtime, and applications</p></li><li data-start="1452" data-end="1478"><p data-start="1454" data-end="1478">generating build scripts</p></li><li data-start="1479" data-end="1521"><p data-start="1481" data-end="1521">building everything with respect to the correct component build order</p></li></ul><p data-start="1523" data-end="1539">Barbican support two build systems by now for the declared component: meson and cargo.</p><p data-start="1523" data-end="1539">Barbican is a python package you can install with:</p><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"> </div></div><div class="contain-inline-size rounded-2xl corner-superellipse/1.1 relative bg-token-sidebar-surface-primary"><div class="overflow-y-auto p-4" dir="ltr"><pre class="language-apacheconf"><code>pip3 install camelot-barbican</code></pre></div></div><h2 id="mcetoc_1jfaqq5bm1vu" data-start="1742" data-end="1786">Clone the Camelot-OS sample Project</h2><p data-start="1788" data-end="1839">Start by downloading the sample project and entering it :</p><div class="contain-inline-size rounded-2xl corner-superellipse/1.1 relative bg-token-sidebar-surface-primary"><div class="overflow-y-auto p-4" dir="ltr"><pre class="language-bash"><code>git clone https://github.com/camelot-os/sample-project
cd sample-project</code></pre></div></div><p data-start="1901" data-end="2014">Inside this directory, you’ll place the main configuration that describes your kernel, runtime, and applications. The following directories exist and are enough for the sample project build:</p><pre class="language-bash"><code>.
├── configs
│   ├── hello
│   │   └── hello.config
│   ├── hello_c
│   │   └── hello_c.config
│   ├── sentry
│   │   └── nucleo_u5a5.config
│   └── shield
│       └── shield.config
├── dts
│   └── sample.dts
├── project.toml
└── README.md
</code></pre><p>In a Camelot OS project, the following elements are required and are under the project integrator responsability:</p><ul><li>For each component (application, kernel, runtime...), the Kconfig configuration associated to it, that correspond to the defconfig command resulting <code>.config</code> file, for each component. Each corresponding config file <strong>need to be generated inside each component source tree</strong> before being stored in the project directory, using either the <code>deconfig</code> or the <code>menuconfig</code> tool for automatic or manual configuration. Once installed, you only need to modify these configration if you upgrade the corresponding component or want to update its configuration</li><li>A project-wide device tree, that matches the corresponding target hardware configuration. This file define how the project is applicable to the target board and as such is under the responsability of the project integrator</li><li>the project configuration file denoted <code>project.toml</code>, that declare what are each component, and how they are associated to above configuration</li></ul><p>Note that in the project device tree file, you need to declare where you want the applications to be mapped. You only need to declare a big-enough memory area, as the kernel memory placement tool will automatically position each application you declared into that area with compliance with the memory protection unit restrictions on your target architecture.</p><p>Memory zones are reserved memories that need to be tagged using the <code>sentry,memory-pool</code> compatible field, and denoted <code>tasks_code</code> for NVM memory area and <code>tasks_ram</code> for SRAM memory area.</p><p>Such a memory area declaration, as you can see in the <code>sample.dts</code> file, looks like this on typical STM32-based target boards:</p><pre class="language-nginx"><code>    reserved-memory {
        # NVM memory area dedicated to application code mapping
        tasks_code: memory@0800d000 {
               reg = &lt;0x0800d000 0x200000&gt;;
               compatible = "sentry,memory-pool";
        };
       # SRAM memory area dedicated to application runtime memory (stack, bss, etc.)
        tasks_ram: memory@20008000 {
               reg = &lt;0x20008000 0x280000&gt;;
               compatible = "sentry,memory-pool";
        };
    };</code></pre><h2 id="mcetoc_1jfaqq5bm1vv" data-start="2021" data-end="2057">About <code data-start="2043" data-end="2057">project.toml</code></h2><p data-start="2059" data-end="2233">At the core of a Camelot-OS project is a <code data-start="2100" data-end="2114">project.toml</code> file that <em data-start="2125" data-end="2161">declares what the project contains</em> — including kernel sources, a device tree, and application definitions.</p><p data-start="2235" data-end="2275">Here’s an example configuration:</p><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"> </div></div><div class="contain-inline-size rounded-2xl corner-superellipse/1.1 relative bg-token-sidebar-surface-primary"><div class="overflow-y-auto p-4" dir="ltr"><pre class="language-python"><code>name = 'Dynamics demo Project'
license = 'Apache-2.0'
license_file = ['LICENSE.txt']
dts = 'dts/sample.dts'
crossfile = 'cm33-none-eabi-gcc.ini'
version = 'v0.0.1'

[kernel]
scm.git.uri = 'https://github.com/camelot-os/sentry-kernel.git'
scm.git.revision = 'main'
config = 'configs/sentry/nucleo_u5a5.config'

[runtime]
scm.git.uri = 'https://github.com/camelot-os/shield.git'
scm.git.revision = 'main'
config = 'configs/shield/shield.config'

[application.hello]
scm.git.uri = 'https://github.com/camelot-os/sample-rust-app.git'
scm.git.revision = 'main'
config = 'configs/hello/hello.config'
build.backend = 'cargo'
depends = []
provides = ['hello.elf']

[application.sample_c_app]
scm.git.uri = 'https://github.com/camelot-os/sample-c-app.git'
scm.git.revision = 'main'
config = 'configs/hello_c/hello_c.config'
build.backend = 'meson'
depends = []
provides = ['sample-c-app.elf']</code></pre></div></div><p data-start="2899" data-end="2919">This file describes:</p><ul data-start="2921" data-end="3168"><li data-start="2921" data-end="2971"><p data-start="2923" data-end="2971">the <em data-start="2927" data-end="2946">kernel repository</em> and configuration to use</p></li><li data-start="2972" data-end="3013"><p data-start="2974" data-end="3013">the <em data-start="2978" data-end="3005">runtime (system services)</em> sources</p></li><li data-start="3014" data-end="3168"><p data-start="3016" data-end="3168">two simple <em data-start="3025" data-end="3050">hello world applications</em> that demonstrate an easy possible usage of a Camelot-OS<br data-start="3050" data-end="3053">Each component is declared with a Git URL, revision, and build configuration.</p></li></ul><h2 id="mcetoc_1jfaqq5bm200" data-start="3175" data-end="3206">Download Sources</h2><p data-start="3208" data-end="3269">Now that the project is complete, use Barbican to fetch all required sources into your project:</p><div class="contain-inline-size rounded-2xl corner-superellipse/1.1 relative bg-token-sidebar-surface-primary"><div class="overflow-y-auto p-4" dir="ltr"><pre class="language-bash"><code>barbican download </code></pre></div></div><p data-start="3302" data-end="3320">This command will:</p><ul data-start="3322" data-end="3451"><li data-start="3322" data-end="3345"><p data-start="3324" data-end="3345">clone the kernel repo</p></li><li data-start="3346" data-end="3373"><p data-start="3348" data-end="3373">fetch the runtime sources</p></li><li data-start="3374" data-end="3451"><p data-start="3376" data-end="3451">pull down application code</p></li></ul><p data-start="3376" data-end="3451">Now you have a local workspace ready to build.</p><p data-start="3376" data-end="3451">All components sources are deployed into a structured <code>output</code> directory, that can be easily removed if you need to reset the project.</p><h2 id="mcetoc_1jfaqq5bm201" data-start="3458" data-end="3488">Setup the Build</h2><p data-start="3490" data-end="3547">Based on the downloaded components,  Barbican can generate all the build infrastructure:</p><div class="contain-inline-size rounded-2xl corner-superellipse/1.1 relative bg-token-sidebar-surface-primary"><div class="overflow-y-auto p-4" dir="ltr"><pre class="language-bash"><code>barbican setup </code></pre></div></div><p data-start="3577" data-end="3792">This processes your <code data-start="3597" data-end="3611">project.toml</code> and creates Meson build definitions for the kernel, runtime, and applications. It ensures that build rules, device tree integration, and configuration files are all wired together.</p><p data-start="3577" data-end="3792">This steps generate a <code>build.ninja</code> file into the <code>output/build</code>directory</p><h2 id="mcetoc_1jfaqq5bm202" data-start="3799" data-end="3833">Compile the Project</h2><p data-start="3835" data-end="3889">Compiling the project is as easy as calling ninja once:</p><pre class="language-apacheconf"><code>ninja -C output/build</code></pre><div class="contain-inline-size rounded-2xl corner-superellipse/1.1 relative bg-token-sidebar-surface-primary"><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-bash"></code></div></div><p data-start="3926" data-end="3944">This will compile:</p><ul data-start="3946" data-end="4022"><li data-start="3946" data-end="3979"><p data-start="3948" data-end="3979">the kernel (Sentry microkernel)</p></li><li data-start="3980" data-end="4000"><p data-start="3982" data-end="4000">shield runtime component (equivalent to GNU/Linux's libc, for both C and Rust runtimes)</p></li><li data-start="4001" data-end="4022"><p data-start="4003" data-end="4022">your application(s)</p></li></ul><p data-start="4024" data-end="4156">Artefacts such as <code data-start="4042" data-end="4053">hello.elf</code> or firmware images will be placed under the build output folder, and can be used if needed as symbol files to debug each project component using, for example, gdb. A global firmware file denoted <code>firmware.hex</code> is also produced.</p><h2 id="mcetoc_1jfaqq5bm203" data-start="4163" data-end="4206">Run your firmware</h2><p data-start="4208" data-end="4297">Once your build completes, you can test in on your board by flashing it using you OCD tool, or on Qemu for boards that are supported ustream such as some STM32-based ones.</p><p data-start="4208" data-end="4297"><strong>Note</strong>: The sample project is made for an armv8-m board, which may not be usable using Qemu depending on the level of support of such architecture.</p><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"> </div></div></article></main><footer class="footer"><div class="wrapper"><div class="footer__copyright"><p>A H2Lab project</p></div><button id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg width="20" height="20"><use xlink:href="https://camelot-os.h2lab.org/assets/svg/svg-map.svg#toparrow"/></svg></button></div></footer><script defer="defer" src="https://camelot-os.h2lab.org/assets/js/scripts.min.js?v=ffcbea6c02c8178d10092962b235a5b0"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://camelot-os.h2lab.org/media/plugins/syntaxHighlighter/prism.js"></script><script defer="defer" src="https://camelot-os.h2lab.org/media/plugins/syntaxHighlighter/prism-inline-color.min.js"></script><script>(function() {
					let collapsibleTOCItems = document.querySelectorAll(".post__toc h2");

					collapsibleTOCItems.forEach(function(item, index) {
						let subList = item.nextElementSibling;
						let parentItem = item.parentElement;
						let toggleButton = null;

						if (subList && subList.tagName === "OL") {
						let defaultState = 'false';
						parentItem.setAttribute('aria-expanded', defaultState);
						subList.setAttribute('aria-hidden', defaultState === 'true' ? 'false' : 'true');

						// Assign ID to subList
						subList.setAttribute('id', 'sublist-' + index);

						const toggleElement = "both";

						if (toggleElement === "header" || toggleElement === "both") {
							// Assign aria-controls and tabindex to item (header)
							item.setAttribute('aria-controls', 'sublist-' + index);
							item.setAttribute('tabindex', '0');

							item.addEventListener('click', function(event) {
								event.preventDefault();
								toggleSubList(this, toggleButton);
							});

							item.addEventListener('keydown', function(event) {
								if (event.key === 'Enter' || event.key === ' ') {
								event.preventDefault();
								toggleSubList(this, toggleButton);
								}
							});
						}

						if (toggleElement === "button" || toggleElement === "both") {
							toggleButton = item.querySelector('.post__toc-toggle');
							if (toggleButton) {
								// Assign aria-controls and tabindex to toggleButton
								toggleButton.setAttribute('aria-controls', 'sublist-' + index);
								toggleButton.setAttribute('tabindex', '0');
								toggleButton.textContent = defaultState === 'true' ? 'hide' : 'show';
								toggleButton.addEventListener('click', function(event) {
								event.stopPropagation();
								event.preventDefault();
								toggleSubList(item, toggleButton);
								});
							}
						}
						}
					});

					function toggleSubList(element, button) {
						let parentItem = element.parentElement;
						let subList = parentItem.querySelector('ol');

						if (subList) {
						if (parentItem.getAttribute('aria-expanded') === 'true') {
							parentItem.setAttribute('aria-expanded', 'false');
							subList.setAttribute('aria-hidden', 'true');
						} else {
							parentItem.setAttribute('aria-expanded', 'true');
							subList.setAttribute('aria-hidden', 'false');
						}
						}

						if (button) {
						button.textContent = parentItem.getAttribute('aria-expanded') === 'true' ? 'hide' : 'show';
						}
					}
				})();</script></body></html>